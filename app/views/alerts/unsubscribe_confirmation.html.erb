<%- content_for :title, "Unsubscribe from Job Alert" %>
<%- content_for :meta_description, "Confirm unsubscribing from your job alert" %>

<div class="container-xxl">
  <div class="row">
    <div class="col-lg-6 mx-auto">
      <div class="card border-warning">
        <div class="card-header bg-warning text-dark">
          <h4 class="mb-0">
            <i class="mdi mdi-email-remove me-2"></i>
            Unsubscribe from Job Alert
          </h4>
        </div>
        
        <div class="card-body">
          <div class="text-center mb-4">
            <i class="mdi mdi-email-off text-warning" style="font-size: 3rem;"></i>
            <h5 class="mt-3">Are you sure you want to unsubscribe from this alert?</h5>
            <p class="text-muted">You can reactivate this alert anytime from your alerts page.</p>
          </div>

          <!-- Alert Details -->
          <div class="alert alert-light border">
            <h6 class="fw-bold mb-2">Alert Details:</h6>
            <% if @alert.criteria&.dig("natural_query").present? %>
              <p class="mb-1"><strong>Search Query:</strong> <%= @alert.criteria["natural_query"] %></p>
            <% end %>
            <p class="mb-1"><strong>Frequency:</strong> <%= @alert.frequency.humanize %></p>
            <p class="mb-1"><strong>Status:</strong> 
              <span class="badge bg-<%= @alert.active? ? 'success' : 'secondary' %>">
                <%= @alert.active? ? 'Active' : 'Inactive' %>
              </span>
            </p>
            <p class="mb-0"><strong>Created:</strong> <%= @alert.created_at.strftime("%B %d, %Y at %I:%M %p") %></p>
          </div>

          <div class="d-flex justify-content-between mt-4">
            <%= link_to alert_path(@alert), class: "btn btn-outline-secondary" do %>
              <i class="mdi mdi-arrow-left me-1"></i> Cancel
            <% end %>
            
            <%= form_with url: unsubscribe_alert_alert_path(@alert), method: :patch, class: "d-inline" do %>
              <button type="submit" class="btn btn-warning">
                <i class="mdi mdi-email-remove me-1"></i> Yes, Unsubscribe
              </button>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
