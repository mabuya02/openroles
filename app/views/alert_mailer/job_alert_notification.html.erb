<style>
  .alert-header { 
    background-color: #e3f2fd; 
    padding: 20px; 
    border-radius: 8px; 
    margin-bottom: 30px; 
    border-left: 4px solid #007bff; 
  }
  
  .job-stats { 
    display: flex; 
    justify-content: space-around; 
    margin: 20px 0; 
    padding: 20px; 
    background-color: #f8f9fa; 
    border-radius: 8px; 
  }
  
  .stat-item { text-align: center; }
  .stat-number { font-size: 24px; font-weight: bold; color: #007bff; display: block; }
  .stat-label { font-size: 12px; color: #666; }
  
  /* Clean table styling */
  .jobs-table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
    background-color: #ffffff;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  
  .jobs-table th {
    background-color: #007bff;
    color: white;
    padding: 15px 12px;
    text-align: left;
    font-weight: 600;
    font-size: 14px;
  }
  
  .jobs-table td {
    padding: 15px 12px;
    border-bottom: 1px solid #e9ecef;
    vertical-align: middle;
  }
  
  .jobs-table tbody tr:hover {
    background-color: #f8f9fa;
  }
  
  .jobs-table tbody tr:last-child td {
    border-bottom: none;
  }
  
  .job-title-link {
    color: #007bff;
    text-decoration: none;
    font-weight: 600;
    font-size: 16px;
  }
  
  .job-title-link:hover {
    text-decoration: underline;
  }
  
  .company-name {
    color: #333;
    font-weight: 500;
  }
  
  .location-text {
    color: #666;
    font-size: 14px;
  }
  
  .action-buttons-cell {
    white-space: nowrap;
  }
  
  .action-link {
    color: #007bff;
    text-decoration: none;
    font-weight: 500;
    font-size: 14px;
  }
  
  .action-link:hover {
    text-decoration: underline;
    color: #0056b3;
  }
  
  .action-buttons { 
    text-align: center; 
    margin: 30px 0; 
  }
  
  .unsubscribe-info { 
    margin-top: 30px; 
    padding: 20px; 
    background-color: #f8f9fa; 
    border-radius: 8px; 
    text-align: center; 
  }
  
  /* Mobile responsiveness */
  @media only screen and (max-width: 600px) {
    .jobs-table {
      font-size: 12px;
    }
    .jobs-table th,
    .jobs-table td {
      padding: 10px 8px;
    }
    .action-link {
      font-size: 12px;
    }
  }
</style>
<div class="alert-header">
  <h3 style="margin-top: 0; color: #007bff;">Hi <%= @user.first_name %>!</h3>
  <p style="margin: 0;">
    We found <strong><%= pluralize(@matching_jobs.count, 'new job') %></strong> matching your alert criteria:
    <% if @alert.criteria["natural_query"].present? %>
      "<em><%= @alert.criteria["natural_query"] %></em>"
    <% else %>
      Your custom job preferences
    <% end %>
  </p>
</div>

<div class="job-stats">
  <div class="stat-item">
    <span class="stat-number"><%= @matching_jobs.count %></span>
    <span class="stat-label">New Jobs</span>
  </div>
  <div class="stat-item">
    <span class="stat-number"><%= @matching_jobs.map(&:company).uniq.count %></span>
    <span class="stat-label">Companies</span>
  </div>
  <div class="stat-item">
    <span class="stat-number"><%= @matching_jobs.count { |job| job.location&.downcase&.include?('remote') } %></span>
    <span class="stat-label">Remote</span>
  </div>
</div>
<!-- Jobs Table - Clean and Simple -->
<table class="jobs-table">
  <thead>
    <tr>
      <th>Job Title</th>
      <th>Company</th>
      <th>Location</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @matching_jobs.each do |job| %>
      <tr>
        <td>
          <a href="<%= job_url(job) %>" class="job-title-link">
            <%= job.title %>
          </a>
        </td>
        <td>
          <span class="company-name"><%= job.company.name %></span>
        </td>
        <td>
          <span class="location-text">
            <%= job.location.present? ? job.location : 'Not specified' %>
          </span>
        </td>
        <td class="action-buttons-cell">
          <a href="<%= job_url(job) %>" class="action-link">View Job</a>
          <% if job.apply_url.present? %>
            | <a href="<%= job.apply_url %>" class="action-link" target="_blank">Apply</a>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<div class="action-buttons">
  <a href="<%= @alert_url %>" class="btn" style="margin-right: 10px;">Manage Alert</a>
  <a href="<%= jobs_url %>" class="btn" style="background-color: #28a745;">Browse All Jobs</a>
</div>

<div class="unsubscribe-info">
  <p style="margin: 0; font-size: 14px; color: #666;">
    This is your <strong><%= @alert.frequency %></strong> job alert. 
    <a href="<%= @unsubscribe_url %>" style="color: #666;">Unsubscribe</a> or 
    <a href="<%= @alert_url %>" style="color: #666;">update preferences</a>.
  </p>
</div>
